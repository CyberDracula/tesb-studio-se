<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>cOnException</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Exception components"><link rel="prev" href="cIntercept.html" title="cIntercept"><link rel="next" href="cTry.html" title="cTry"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="cOnException"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cOnException"></a>cOnException</h2></div></div></div><div class="mediaobject"><img src="../images/cOnException_icon32_white.png"></div><div class="section" title="cOnException properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1024"></a>cOnException properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="bold"><strong>Component Family</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>Exception</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>
								<span class="bold"><strong>cOnException</strong></span> catches the defined
								exceptions to trigger desired actions.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>
								<span class="bold"><strong>cOnException</strong></span> is designed to catch
								the defined exceptions for desired error handling. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Exceptions</em></span>
							</p>
						</td><td valign="top">
							<p>Click the plus button to add as many lines as needed in the table
								to define the exceptions to be caught.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Set a redelivering tries count</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to set the maximum redelivering tries in the
									<span class="bold"><strong>Maximum redelivering tries</strong></span>
								field. </p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Non blocking asynchronous behavior</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to enable the feature of not blocking
								asynchronous behavior.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Exception behavior</em></span>
							</p>
						</td><td valign="top">
							<p><span class="bold"><strong>None</strong></span>: select this option to take
								no action on the original route.</p>
							<p><span class="bold"><strong>Handle the exceptions</strong></span>: select
								this option to handle exceptions and break out the original
								route.</p>
							<p><span class="bold"><strong>Ignore the exceptions</strong></span>: select
								this option to ignore the exceptions and continue routing in the
								original route. </p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Route the original input body instead of the current
									body</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to route the original message instead of the
								current message that might be changed during the routing.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>
								<span class="bold"><strong>cOnException</strong></span> is generally used as a
								standalone component in a sub-route.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Limitation</strong></span>
							</p>
						</td><td colspan="2">
							<p>&nbsp;n/a</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario: Using cOnException to ignore exceptions and continue message routing"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1209"></a>Scenario: Using cOnException to ignore exceptions and continue message routing</h3></div></div></div><p>In this scenario, a <span class="bold"><strong>cOnException</strong></span> component is used to
			ignore an IO exception thrown by a Java bean so that the message is successfully routed
			to the destination in spite of the exception.</p><div class="mediaobject" align="center"><img src="../images/use_case_conexception_1.png" align="middle"></div><div class="section" title="Dropping and linking the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1220"></a>Dropping and linking the components </h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drag and drop these components from the <span class="bold"><strong>Palette</strong></span> onto the
						workspace: a <span class="bold"><strong>cOnException</strong></span> component, a
							<span class="bold"><strong>cFile</strong></span> component, a <span class="bold"><strong>cBean</strong></span> component, and <span class="bold"><strong>cProcessor</strong></span> component.</p></li><li class="step" title="Step 2"><p>Link <span class="bold"><strong>cFile</strong></span> to <span class="bold"><strong>cBean</strong></span> using a <span class="bold"><strong>Row</strong></span> &gt;
							<span class="bold"><strong>Route</strong></span> connection.</p></li><li class="step" title="Step 3"><p>Link <span class="bold"><strong>cBean</strong></span> to <span class="bold"><strong>cProcessor</strong></span> using a <span class="bold"><strong>Row</strong></span> &gt;
							<span class="bold"><strong>Route</strong></span> connection.</p></li><li class="step" title="Step 4"><p>Label the components to better identify their roles in the Route.</p></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1275"></a>Configuring the components </h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="bold"><strong>cOnException</strong></span> component,
						which is labelled <span class="italic">Ignore_exception</span>, to
						open its <span class="bold"><strong>Basic settings</strong></span> view in the
							<span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject" align="center"><img src="../images/use_case_conexception_2.png" align="middle"></div></li><li class="step" title="Step 2"><p>Click the plus button to add a line in the <span class="bold"><strong>Exceptions</strong></span> table, and define the exception to catch. In this example, enter <code class="code">java.io.IOException</code> to handle IO exceptions.</p><p>In the <span class="bold"><strong>Exception behavior</strong></span> area, select the <span class="bold"><strong>Ignore the exceptions</strong></span> option to ignore exceptions and let message routing continue. Leave the other parameters as they are.</p></li><li class="step" title="Step 3"><p>Double-click the <span class="bold"><strong>cFile</strong></span> component, which
						is labelled <span class="italic">Source</span>, to open its <span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject" align="center"><img src="../images/use_case_conexception_3.png" align="middle"></div></li><li class="step" title="Step 4"><p>In the <span class="bold"><strong>Path</strong></span> field, enter the path of the
						message source, and leave the other parameters as they are. </p></li><li class="step" title="Step 5"><p>Double-click the <span class="bold"><strong>cBean</strong></span> component, which
						is labelled <span class="italic">Throw_exception</span>, to open its
							<span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab.</p><div class="mediaobject" align="center"><img src="../images/use_case_conexception_4.png" align="middle"></div></li><li class="step" title="Step 6"><p>In the <span class="bold"><strong>Bean class</strong></span> field, enter the name of the bean to
						throw an IO exception, <span class="italic">beans.throwIOException.class</span> in this scenario.</p><p>Note that this bean has already been defined in the <span class="bold"><strong>Code</strong></span>
						node of the <span class="bold"><strong>Repository</strong></span> and it looks like
						this:</p><pre class="programlisting">package beans;

import java.io.IOException;

import org.apache.camel.Exchange;


public class throwIOException {

    /**

     * @throws IOException 
     */
    public static void helloExample(String message, Exchange exchange) throws IOException {
        throw new IOException("An IOException has been caught");
    }
}</pre><p>For more information about creating and using Java Beans, see <span class="bluebold">Talend Open Studio for ESB</span>
						<span class="bold"><strong>User Guide</strong></span>. </p></li><li class="step" title="Step 7"><p>Double-click the <span class="bold"><strong>cProcessor</strong></span> component,
						which is labelled <span class="italic">Monitor</span>, to open its
							<span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject" align="center"><img src="../images/use_case_conexception_5.png" align="middle"></div></li><li class="step" title="Step 8"><p>In the <span class="bold"><strong>Code</strong></span> area, customize the code to display the file
						name of the consumed message on the <span class="bold"><strong>Run</strong></span>
						console:</p><pre class="programlisting">System.out.println("Message consumed: "+ 
exchange.getIn().getHeader("CamelFileName")); </pre></li><li class="step" title="Step 9"><p>Press <span class="bold"><strong>Ctrl+S</strong></span> to save your Route.</p></li></ol></div></div><div class="section" title="Viewing code and executing the Route"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1419"></a>Viewing code and executing the Route</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Click the <span class="bold"><strong>Code</strong></span> tab at the bottom of the
						design workspace to check the generated code.</p><div class="mediaobject" align="center"><img src="../images/use_case_conexception_6.png" align="middle"></div><p>As shown above,  <code class="code">Ignore_exception</code> handles any IO exception thrown by
							<code class="code">.bean(beans.throwIOException.class)</code> invoked by
							<code class="code">cBean_1</code>, so that messages <code class="code">from</code> the endpoint
							<code class="code">Source</code> can be successfully routed onwards
							(<code class="code">continued(true)</code>) in spite of the exception. </p></li><li class="step" title="Step 2"><p>Press <span class="bold"><strong>F6</strong></span> to execute the Route.</p><p>The route gets executed successfully and the files from the source are successfully
						routed to the destination.</p><div class="mediaobject" align="center"><img src="../images/use_case_conexception_7.png" align="middle"></div></li><li class="step" title="Step 3"><p>Change the exception handling option in the <span class="bold"><strong>cOnException</strong></span>
						component or deactivate the component and run the Route again.</p><p>The exception thrown by the Java bean prevents the messages from being
						routed successfully.</p></li></ol></div></div></div></div></body></html>