<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>cJMS</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Messaging components"><link rel="prev" href="cFTP.html" title="cFTP"><link rel="next" href="cMessagingEndpoint.html" title="cMessagingEndpoint"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="cJMS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cJMS"></a>cJMS</h2></div></div></div><div class="mediaobject"><img src="../images/cjms_icon32_white.png"></div><div class="section" title="cJMS properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3474"></a>cJMS properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="bold"><strong>Component Family</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>Messaging</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>
								<span class="bold"><strong>cJMS</strong></span> allows messages to be sent to
								(or consumed from) a JMS Queue or Topic.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>
								<span class="bold"><strong>cJMS</strong></span> is used to send messages to,
								or consume messages from, a JMS Queue or Topic.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Endpoint URI/Type</em></span>
							</p>
						</td><td valign="top">
							<p>Select the messaging type, either <span class="bold"><strong>queue</strong></span> or <span class="bold"><strong>topic</strong></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Endpoint URI/Destination</em></span>
							</p>
						</td><td valign="top">
							<p>Type in a name for the JMS queue or topic. </p>
						</td></tr><tr><td>&nbsp;</td><td valign="top"><span class="italic">Broker/MQ
							Server</span></td><td valign="top">Select an MQ server from <span class="bold"><strong>ActiveMQ</strong></span>, <span class="bold"><strong>Customized</strong></span>,
							or <span class="bold"><strong>WebSphere MQ</strong></span>.</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Broker URI</span>
							</p>
							<p>(for <span class="bold"><strong>ActiveMQ</strong></span> only)</p>
						</td><td valign="top">
							<p>Type in the URI of the broker you use for message handling. For
								intra-Route message handling, you can simply use the default URI
									<span class="italic">vm://localhost?broker.persistent=false</span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Broker/Codes</em></span>
							</p>
							<p>(for <span class="bold"><strong>Customized</strong></span> only)</p>
						</td><td valign="top">
							<p>Write a piece of code to specify the JMS connection factory to be
								used for handling messages. </p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Dependencies</span></p>
							<p>(for <span class="bold"><strong>Customized</strong></span>)</p>
						</td><td valign="top">Specify the library or libraries required by the JMS
							connection factory from the list.</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Host Name</span></p>
							<p>(for <span class="bold"><strong>WebSphere MQ</strong></span> only)</p>
						</td><td valign="top">Type in the name or IP address of the host on which the
							IBM WebSphere MQ server is running.</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Port</span></p>
							<p>(for <span class="bold"><strong>WebSphere MQ</strong></span> only)</p>
						</td><td valign="top">Type in port of the IBM WebSphere MQ server, <span class="bold"><strong>1414</strong></span> by default.</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Transport Type</span></p>
							<p>(for <span class="bold"><strong>WebSphere MQ</strong></span> only)</p>
						</td><td valign="top">Select a type of message transport between the IBM
							WebSphere MQ server and the WebSphere MQ broker, <span class="bold"><strong>client</strong></span> by default.</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Queue Manager</span></p>
							<p>(for <span class="bold"><strong>WebSphere MQ</strong></span> only)</p>
						</td><td valign="top">Type in the name of the queue manager, or specify the
							name of the IBM WebSphere MQ server to find a queue manager.</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Authentication</span></p>
							<p>(for <span class="bold"><strong>WebSphere MQ</strong></span> only)</p>
						</td><td valign="top">On some operating systems, select this check box and
							provide the username and password for the IBM WebSphere MQ server to
							validate the access permission. This option is not required on
							Windows.</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p><span class="italic">Broker/Dependencies</span></p>
							<p>(for <span class="bold"><strong>WebSphere MQ</strong></span>)</p>
						</td><td valign="top">Specify additional libraries required by the IBM
							WebSphere MQ broker, which are normally provided with the server
							installer.</td></tr><tr><td>
							<span class="bold"><strong>Advanced settings</strong></span>
						</td><td valign="top">
							<span class="emphasis"><em>URI Options</em></span>
						</td><td valign="top">Set the optional arguments in the corresponding table.
							Click <span class="bold"><strong>[+]</strong></span> as many times as required to
							add arguments to the table. Then click the corresponding <span class="bold"><strong>Value</strong></span> field and enter a value. See the site
								<a class="link" href="http://camel.apache.org/jms.html" target="_top">http://camel.apache.org/jms.html</a> for available URI
							options.</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="bold"><strong>cJMS</strong></span> can be a start, middle or
								end component in a Route.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="bold"><strong>Limitation</strong></span>
							</p>
						</td><td colspan="2">
							<p>&nbsp;n/a</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario: Sending and receiving a message from a JMS queue"><div class="titlepage"><div><div><h3 class="title"><a name="nwang-20111014-camel_components-cjms_s1"></a>Scenario: Sending and receiving a message from a JMS queue</h3></div></div></div><p>In this scenario, a <span class="bold"><strong>cJMS</strong></span> component sends messages
			from the local file system to a message queue in one Route, and the messages are then
			consumed by another <span class="bold"><strong>cJMS</strong></span> component in another
			Route.</p><p>Message producer Route:</p><div class="mediaobject"><img src="../images/use_case_cjms1.png"></div><p>Message consumer Route:</p><div class="mediaobject"><img src="../images/use_case_cjms1bis.png"></div><div class="section" title="Dropping and linking the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3830"></a>Dropping and linking the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Create a Route to implement the message producer.</p></li><li class="step" title="Step 2"><p>From the <span class="bold"><strong>Messaging</strong></span> folder of the
							<span class="bold"><strong>Palette</strong></span>, drop a <span class="bold"><strong>cFile</strong></span> component and a <span class="bold"><strong>cJMS</strong></span>
						component onto the design workspace, one as the message source and the other
						as the message producer . </p></li><li class="step" title="Step 3"><p>Connect the <span class="bold"><strong>cFile</strong></span> component to the
							<span class="bold"><strong>cJMS</strong></span> component using a <span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>Route</strong></span>
						connection.</p></li><li class="step" title="Step 4"><p>Create another Route to implement the message consumer.</p></li><li class="step" title="Step 5"><p>From the <span class="bold"><strong>Messaging</strong></span> folder of the
							<span class="bold"><strong>Palette</strong></span>, drop a <span class="bold"><strong>cJMS</strong></span> component onto the design workspace, to consume the
						messages produced in the previous Route.</p></li><li class="step" title="Step 6"><p>From the <span class="bold"><strong>Processor</strong></span> folder of the
							<span class="bold"><strong>Palette</strong></span>, drop a <span class="bold"><strong>cProcessor</strong></span> component onto the design workspace, to monitor
						the messages received by the message consumer.</p></li><li class="step" title="Step 7"><p>Connect the <span class="bold"><strong>cJMS</strong></span> component to the
							<span class="bold"><strong>cProcessor</strong></span> component using a <span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>Route</strong></span>
						connection. </p></li><li class="step" title="Step 8"><p>Label the components in both Routes properly for better identification of
						their functionalities.</p></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3912"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the message producer Route, double-click the <span class="bold"><strong>cFile</strong></span> component to display its <span class="bold"><strong>Basic
							settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_cjms2.png"></div></li><li class="step" title="Step 2"><p>Define the properties of the <span class="bold"><strong>cFile</strong></span>
						component. </p><p>In this use case, simply specify the path to the folder that holds the
						source files to be sent as electronic messages, and leave the other
						parameters as they are.</p></li><li class="step" title="Step 3"><p>Double-click the <span class="bold"><strong>cJMS</strong></span> component, the
						message producer to display its <span class="bold"><strong>Basic
							settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_cjms3.png"></div></li><li class="step" title="Step 4"><p>From the <span class="bold"><strong>Type</strong></span> list, select <span class="bold"><strong>queue</strong></span> to send the messages to a JMS queue.</p><p>In the <span class="bold"><strong>Destination</strong></span> field, type in the name of the JMS queue.</p><p>From the <span class="bold"><strong>MQ Server</strong></span> list, select an MQ server. In this use case, we use the default ActiveMQ server to handle the messages. </p><p>In the <span class="bold"><strong>Broker URI</strong></span> field, type in the URI of the message broker, <span class="italic">tcp://localhost:65516</span> in this use case.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>When using ActiveMQ to handle messages between different Routes, you need to launch the ActiveMQ server before executing the Routes. For more information on installing and launching ActiveMQ server, see the section about installing Apache ActiveMQ in the <span class="emphasis"><em>Talend ESB</em></span>
								<span class="bold"><strong>Installation Guide</strong></span>.</p></td></tr></table></div></li><li class="step" title="Step 5"><p>Switch to the message consumer Route, and double click the <span class="bold"><strong>cJMS</strong></span> component, the message consumer to display
						its <span class="bold"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_cjms4.png"></div></li><li class="step" title="Step 6"><p>Configure the message consumer using exactly the same parameters as in the
						message producer in the message producer Route. </p></li><li class="step" title="Step 7"><p>Double-click the cProcessor component to display its <span class="bold"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_cjms5.png"></div></li><li class="step" title="Step 8"><p>In the <span class="bold"><strong>Code</strong></span> area, customize the code to
						display the file names of the consumed messages on the Run console.</p></li><li class="step" title="Step 9"><p>Press <span class="bold"><strong>Ctrl+S</strong></span> to save your Routes one
						after another.</p></li></ol></div></div><div class="section" title="Viewing code and executing the Route"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4021"></a>Viewing code and executing the Route</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Click the <span class="bold"><strong>Code</strong></span> tab at the bottom of the
						design workspace to have a look at the generated code. </p><div class="mediaobject"><img src="../images/use_case_cjms6_1.png"></div><div class="mediaobject"><img src="../images/use_case_cjms6_2.png"></div><p>As shown in the two pieces of code taken from the message producer Route,
						a message route is built <code class="code">from</code> the <code class="code">File_source</code>
						<code class="code">.to</code> the <code class="code">Message_producer</code>, which then sends the
						messages to a message queue via a broker identified by
							<code class="code">tcp://localhost:65516</code>.</p></li><li class="step" title="Step 2"><p>Click the <span class="bold"><strong>Run</strong></span> button in the <span class="bold"><strong>Run</strong></span> view to run each of your Routes one after
						another. You can also press <span class="bold"><strong>F6</strong></span> to execute
						them. </p><p>RESULT: The messages are received by the consumer, as shown on the Run
						console of the message consumer Route.</p><div class="mediaobject"><img src="../images/use_case_cjms7.png"></div></li></ol></div></div></div></div></body></html>