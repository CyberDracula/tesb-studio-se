<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>cMessagingEndpoint</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-esb-mediationcomponents-rg-fr..html" title="Talend Open Studio"><link rel="up" href="ch-messaging.html" title="Chapitre&nbsp;3.&nbsp;Composants Messaging"><link rel="prev" href="cMail.html" title="cMail"><link rel="next" href="cTimer.html" title="cTimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">cMessagingEndpoint</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="cMail.html">Pr&eacute;c&eacute;dent</a>&nbsp;</td><th width="60%" align="center">Chapitre&nbsp;3.&nbsp;Composants Messaging</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="cTimer.html">Suivant</a></td></tr></table><hr></div><div lang="fr" class="section" title="cMessagingEndpoint"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cMessagingEndpoint"></a>cMessagingEndpoint</h2></div></div></div><div class="mediaobject"><img src="../images/cMessagingEndpoint_icon32_white.png"></div><div class="section" title="Propri&eacute;t&eacute;s du cMessagingEndpoint"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7659"></a>Propri&eacute;t&eacute;s du cMessagingEndpoint</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top"><p><span class="emphasis"><strong>Famille de composant</strong></span></p>
						</td><td colspan="2" valign="top"><p>Messaging</p>
						</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Fonction</strong></span></p>
						</td><td colspan="2" valign="top"><p>Le composant <span class="emphasis"><strong>cMessagingEndpoint</strong></span> permet &agrave; deux applications de
								communiquer en envoyant ou en recevant des messages, un endpoint ne
								pouvant pas faire les deux. </p>
						</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Objectif</strong></span></p>
						</td><td colspan="2" valign="top"><p>Le <span class="emphasis"><strong>cMessagingEndpoint</strong></span> envoie ou re&ccedil;oit des messages. </p>
						</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Basic
								settings</strong></span></p>
						</td><td valign="top"><p><span class="emphasis"><em>URI</em></span></p>
						</td><td valign="top"><p>URI des messages &agrave; envoyer ou &agrave; recevoir. Ils peuvent &ecirc;tre de diff&eacute;rents formats :</p><p>- Fichier : "file:/", </p><p>- Base de donn&eacute;es : "jdbc:/", </p><p>- Protocoles : "ftp:/", "http:/"</p><p>- etc.</p><p>Vous pouvez ajouter des param&egrave;tres &agrave; l'URI &agrave; l'aide  de la syntaxe g&eacute;n&eacute;rique des URIs, par
								exemple :</p><p>
								<code class="code">"file:/directoryName?option=value&amp;option=value"</code>
							</p><p>Pour plus d'informations concernant les diff&eacute;rents composants pouvant &ecirc;tre utilis&eacute;s dans le
									<span class="emphasis"><strong>cMessagingEndpoint</strong></span>, consultez
								le site Web de Apache Camel : <a class="link" href="http://camel.apache.org/components.html" target="_top">http://camel.apache.org/components.html</a> (en
								anglais).</p>
						</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Advanced
								settings</strong></span></p>
						</td><td valign="top"><p><span class="emphasis"><em>Dependencies</em></span></p>
						</td><td valign="top"><p>Par d&eacute;faut, le noyau de Camel supporte les composants suivants : bean, browse, class, dataset,
								direct, file, language, log, mock, properties, ref, seda, timer,
								vm.</p><p>Pour utiliser d'autres composants, vous devez fournit les d&eacute;pendances correspondant &agrave; ces
								composants dans le composant <span class="emphasis"><strong>cMessagingEndpoint</strong></span>. Pour ce faire :</p><p>Cliquez sur le bouton <span class="emphasis"><strong>[+]</strong></span> pour ajouter une nouvelle ligne
								dans la liste <span class="emphasis"><strong>Camel component</strong></span>. Dans
								la ligne ajout&eacute;e, s&eacute;lectionnez le composant que vous souhaitez
								utiliser dans le <span class="emphasis"><strong>cMessagingEndpoint</strong></span>. </p>
						</td></tr><tr><td><p>&nbsp;</p>
						</td><td valign="top"><p><span class="emphasis"><em>Use a custom component</em></span></p>
						</td><td valign="top"><p>Si vous souhaitez utiliser un composant personnalis&eacute;, cochez cette case et cliquez sur le
								bouton <span class="emphasis"><strong>[...]</strong></span> pour charger un
								fichier .jar avec votre propre composant.</p><p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Toutes les d&eacute;pendances transitives de ce composant personnalis&eacute; doivent &ecirc;tre incluses
									dans le fichier jar.</p></div>
						</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Utilisation</strong></span></p>
						</td><td colspan="2" valign="top"><p>Ce composant peut &ecirc;tre utilis&eacute; pour envoyer et/ou recevoir des endpoints de messages selon sa
								position dans la Route. </p>
						</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Limitation</strong></span></p>
						</td><td colspan="2"><p>&nbsp;n/a</p>
						</td></tr></tbody></table></div></div><div class="section" title="Sc&eacute;nario&nbsp;1 : D&eacute;placer des fichiers d'un endpoint de message &agrave; un autre"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7816"></a>Sc&eacute;nario&nbsp;1 : D&eacute;placer des fichiers d'un endpoint de message &agrave; un autre</h3></div></div></div><p>Ce sc&eacute;nario utilise deux composants <span class="emphasis"><strong>cMessagingEndpoint</strong></span> afin
			de lire et de d&eacute;placer des fichiers d'un endpoint &agrave; un autre.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario1_1.png"></div><div class="section" title="D&eacute;poser et relier les composants"><div class="titlepage"><div><div><h4 class="title"><a name="d0e7827"></a>D&eacute;poser et relier les composants</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Dans la <span class="emphasis"><strong>Palette</strong></span>, d&eacute;veloppez le dossier <span class="emphasis"><strong>Messaging</strong></span> et d&eacute;posez deux composants <span class="emphasis"><strong>cMessagingEndpoint</strong></span> dans l'espace de mod&eacute;lisation
						graphique. L'un sera l'&eacute;metteur, l'autre le destinataire. Nommez-les
						respectivement <span class="emphasis"><em>Sender</em></span> et <span class="emphasis"><em>Receiver</em></span> pour mieux percevoir leur r&ocirc;le dans la
						Route.</p></li><li class="step" title="&Eacute;tape 2"><p>Cliquez-droit sur le premier composant, s&eacute;lectionnez <span class="emphasis"><strong>Row</strong></span>
					&gt; <span class="emphasis"><strong>Route</strong></span> dans le menu et glissez vers le
					second composant afin de les relier avec un lien <span class="emphasis"><strong>Route</strong></span>.</p></li></ol></div></div><div class="section" title="Configurer les composants et les connexions"><div class="titlepage"><div><div><h4 class="title"><a name="d0e7861"></a>Configurer les composants et les connexions</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Double-cliquez sur le premier composant d'endpoint pour afficher sa vue <span class="emphasis"><strong>Component</strong></span>.</p></li><li class="step" title="&Eacute;tape 2"><p>Dans le champ <span class="emphasis"><strong>URI</strong></span>, saisissez l'URI des messages que vous
					souhaitez router. </p><p>Comme vous g&eacute;rez des fichiers, saisissez <span class="emphasis"><em>"file:///"</em></span> ainsi que le
						chemin d'acc&egrave;s au dossier contenant les fichiers.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario1_2.png"></div></li><li class="step" title="&Eacute;tape 3"><p>Double-cliquez sur le second composant d'endpoint pour afficher sa vue <span class="emphasis"><strong>Component</strong></span>.</p></li><li class="step" title="&Eacute;tape 4"><p>Dans le champ <span class="emphasis"><strong>URI</strong></span>, saisissez l'URI du dossier vers lequel
					vous souhaitez router votre message. </p><p>Comme vous g&eacute;rez des fichiers, saisissez <span class="emphasis"><em>"file:/"</em></span> ainsi que le chemin
					d'acc&egrave;s au dossier dans lequel les fichiers seront envoy&eacute;s.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario1_3.png"></div></li><li class="step" title="&Eacute;tape 5"><p>Appuyez sur <span class="emphasis"><strong>Ctrl+S</strong></span> pour sauvegarder votre Route.</p></li></ol></div></div><div class="section" title="Voir le code et ex&eacute;cuter la Route"><div class="titlepage"><div><div><h4 class="title"><a name="d0e7911"></a>Voir le code et ex&eacute;cuter la Route</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Pour visualiser le code g&eacute;n&eacute;r&eacute;, cliquez sur l'onglet <span class="emphasis"><strong>Code</strong></span>
				au bas de l'espace de mod&eacute;lisation graphique.</p><div class="mediaobject" align="center"><img src="../images/cMessagingEndpoint_scenario1_4.png" align="middle"></div><p>Le code affiche le <code class="code">from</code> et le <code class="code">.to</code> correspondants aux deux
					endpoints ; <code class="code">from</code> pour l'endpoint &eacute;metteur et <code class="code">.to</code> pour
					l'endpoint r&eacute;cepteur.</p></li><li class="step" title="&Eacute;tape 2"><p>Dans la vue <span class="emphasis"><strong>Run</strong></span>, cliquez sur le bouton <span class="emphasis"><strong>Run</strong></span> pour lancer l'ex&eacute;cution de votre Route. </p><p>Vous pouvez &eacute;galement appuyer sur <span class="emphasis"><strong>F6</strong></span> pour l'ex&eacute;cuter. </p><p>R&eacute;sultat : Les fichiers sont d&eacute;plac&eacute;s de leur dossier original vers le dossier cible. De
			plus, un nouveau dossier <span class="emphasis"><strong>.camel</strong></span> est cr&eacute;&eacute; dans le
			dossier source contenant les fichiers consomm&eacute;s. C'est le comportement de Camel par
			d&eacute;faut. Ainsi, les fichiers ne seront pas trait&eacute;s ind&eacute;finiment mais seront sauvegard&eacute;s
			en cas de probl&egrave;me.</p></li></ol></div></div></div><div class="section" title="Sc&eacute;nario&nbsp;2 : Envoyer des fichiers vers un autre endpoint de message"><div class="titlepage"><div><div><h3 class="title"><a name="Raa98448"></a>Sc&eacute;nario&nbsp;2 : Envoyer des fichiers vers un autre endpoint de message</h3></div></div></div><p>Ce sc&eacute;nario permet d'acc&eacute;der &agrave; un service FTP et de transf&eacute;rer des fichiers d'un endpoint &agrave;
			un autre.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario1_1.png"></div><div class="section" title="D&eacute;poser et relier les composants"><div class="titlepage"><div><div><h4 class="title"><a name="d0e7965"></a>D&eacute;poser et relier les composants</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Dans la <span class="emphasis"><strong>Palette</strong></span>, d&eacute;veloppez le dossier <span class="emphasis"><strong>Messaging</strong></span> et s&eacute;lectionnez le composant <span class="emphasis"><strong>cMessagingEndpoint</strong></span> puis glissez-en deux dans
						l'espace de mod&eacute;lisation graphique. Nommez-les respectivement <span class="emphasis"><em>Sender</em></span> et <span class="emphasis"><em>Receiver</em></span>.</p></li><li class="step" title="&Eacute;tape 2"><p>Cliquez-droit sur le premier composant, s&eacute;lectionnez <span class="emphasis"><strong>Row</strong></span>
					&gt; <span class="emphasis"><strong>Route</strong></span> dans le menu et glissez vers le
					second composant afin de les relier par un lien <span class="emphasis"><strong>Route</strong></span>. </p></li></ol></div></div><div class="section" title="Configurer les composants et les connexions"><div class="titlepage"><div><div><h4 class="title"><a name="d0e7999"></a>Configurer les composants et les connexions</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Double-cliquez sur le composant nomm&eacute; <span class="emphasis"><em>Sender</em></span> pour
						afficher sa vue <span class="emphasis"><strong>Component</strong></span>.</p></li><li class="step" title="&Eacute;tape 2"><p>Dans le champ <span class="emphasis"><strong>URI</strong></span>, saisissez l'URI du message que vous
				souhaitez router. </p><p>Ici, utilisez un composant FTP : <code class="code">ftp://indus@degas/remy/camel</code> avec des
					param&egrave;tres d'URI sp&eacute;cifiques permettant l'authentification de la connexion FTP :
						<code class="code">?username=indus&amp;password=indus</code>.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario2_2.png"></div></li><li class="step" title="&Eacute;tape 3"><p>Pour que le composant FTP fonctionne dans Camel, cliquez sur l'onglet <span class="emphasis"><strong>Advanced settings</strong></span> du composant <span class="emphasis"><strong>cMessagingEndpoint</strong></span>, cliquez sur le bouton <span class="emphasis"><strong>[+]</strong></span> pour ajouter un composant Camel dans la table <span class="emphasis"><strong>Dependencies</strong></span> et s&eacute;lectionnez <span class="emphasis"><em>ftp</em></span>
					dans la liste <span class="emphasis"><strong>Camel component</strong></span> pour activer le
					composant FTP.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario2_3.png"></div></li><li class="step" title="&Eacute;tape 4"><p>Double-cliquez sur le composant nomm&eacute; <span class="emphasis"><em>Receiver</em></span> pour
						afficher sa vue <span class="emphasis"><strong>Component</strong></span>. </p></li><li class="step" title="&Eacute;tape 5"><p>Dans le champ <span class="emphasis"><strong>URI</strong></span>, saisissez l'URI du dossier vers lequel
					vous souhaitez que votre message soit rout&eacute;. </p><p>Comme vous g&eacute;rez des fichiers, saisissez <span class="emphasis"><em>"file:/"</em></span> ainsi que le chemin
					d'acc&egrave;s au dossier dans lequel les fichier seront envoy&eacute;s.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario1_3.png"></div></li><li class="step" title="&Eacute;tape 6"><p>Appuyez sur <span class="emphasis"><strong>Ctrl+S</strong></span> pour sauvegarder votre Route.</p></li></ol></div></div><div class="section" title="Visualiser le code et ex&eacute;cuter la Route"><div class="titlepage"><div><div><h4 class="title"><a name="d0e8082"></a>Visualiser le code et ex&eacute;cuter la Route</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Pour visualiser le code g&eacute;n&eacute;r&eacute;, cliquez sur l'onglet <span class="emphasis"><strong>Code</strong></span>
					au bas de l'espace de mod&eacute;lisation graphique.</p><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario2_4.png"></div><div class="mediaobject"><img src="../images/cMessagingEndpoint_scenario2_5.png"></div><p>Dans cette partie du code, vous pouvez voir une route repr&eacute;sent&eacute;e par le <code class="code">from</code>
					et le <code class="code">.to</code>, correspondants aux endpoints &eacute;metteur et
					r&eacute;cepteur.</p></li><li class="step" title="&Eacute;tape 2"><p>Dans la vue <span class="emphasis"><strong>Run</strong></span>, cliquez sur le bouton <span class="emphasis"><strong>Run</strong></span> pour lancer l'ex&eacute;cution de votre Route. </p><p>Vous pouvez &eacute;galement appuyer sur <span class="emphasis"><strong>F6</strong></span> pour l'ex&eacute;cuter. </p><p>R&eacute;sultat : Le message est envoy&eacute; (copi&eacute;) &agrave; l'endpoint r&eacute;cepteur.</p></li></ol></div></div></div><div class="section" title="Sc&eacute;nario&nbsp;3 : Utiliser un endpoint Xquery pour filtrer des messages"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8122"></a>Sc&eacute;nario&nbsp;3 : Utiliser un endpoint Xquery pour filtrer des messages</h3></div></div></div><p>Dans ce sc&eacute;nario, utilisez un composant <span class="emphasis"><strong>cMessagingEndpoint</strong></span>
			pour appeler une ressource de Route comme un analyseur Xquery pour extraire des messages
			d'un syst&egrave;me de fichiers local.</p><p>Voici un extrait du fichier XML utilis&eacute; dans ce sc&eacute;nario :</p><p>
			</p><pre class="programlisting">&lt;people&gt;
  &lt;person id="8"&gt;
    &lt;firstName&gt;Ellen&lt;/firstName&gt;
    &lt;lastName&gt;Ripley&lt;/lastName&gt;
    &lt;city&gt;Washington&lt;/city&gt;
  &lt;/person&gt;  
  &lt;person id="9"&gt;
    &lt;firstName&gt;Peter&lt;/firstName&gt;
    &lt;lastName&gt;Green&lt;/lastName&gt;
    &lt;city&gt;London&lt;/city&gt;
  &lt;/person&gt;
&lt;/people&gt;</pre><p>
		</p><div class="section" title="Cr&eacute;er une ressource de Route"><div class="titlepage"><div><div><h4 class="title"><a name="d0e8137"></a>Cr&eacute;er une ressource de Route</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Dans la vue <span class="emphasis"><strong>Repository</strong></span>, cliquez-droit sur le n&#339;ud
							<span class="emphasis"><strong>Resources</strong></span> et s&eacute;lectionnez <span class="emphasis"><strong>Create Resource</strong></span> dans le menu contextuel.</p><div class="mediaobject"><img src="../images/use_case_ccxf12.png"></div></li><li class="step" title="&Eacute;tape 2"><p>L'assistant <span class="emphasis"><strong>New Route Resource</strong></span> s'ouvre. Dans le champ
							<span class="emphasis"><strong>Name</strong></span>, saisissez un nom pour la
						ressource, par exemple, <span class="emphasis"><em>SampleXquery</em></span>. Cliquez sur
							<span class="emphasis"><strong>Finish</strong></span> pour fermer l'assistant.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_1.png"></div></li><li class="step" title="&Eacute;tape 3"><p>Saisissez le code suivant dans l'&eacute;diteur afin d'extraire le pr&eacute;nom
							(<span class="emphasis"><em>firstName</em></span>) et le nom de famille
							(<span class="emphasis"><em>lastName</em></span>) de tous les &eacute;l&eacute;ments
							<span class="emphasis"><em>person</em></span>.</p><p>
						</p><pre class="programlisting">declare namespace ns0="http://com.sap/b";
&lt;people&gt;
{
for $p in /people//person
return
            &lt;person&gt;
            &lt;firstName&gt;{$p/firstName/text()}&lt;/firstName&gt;
            &lt;lastName&gt;{$p/lastName/text()}&lt;/lastName&gt;
            &lt;/person&gt;
}
&lt;/people&gt;</pre><p>
					</p></li><li class="step" title="&Eacute;tape 4"><p> Appuyez sur les touches <span class="emphasis"><strong>Ctrl+S</strong></span> pour sauvegarder votre
						ressource de Route.</p></li></ol></div></div><div class="section" title="D&eacute;poser et relier les composants"><div class="titlepage"><div><div><h4 class="title"><a name="d0e8197"></a>D&eacute;poser et relier les composants</h4></div></div></div><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_2.png"></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Depuis le dossier <span class="emphasis"><strong>Messaging</strong></span> de la <span class="emphasis"><strong>Palette</strong></span>, glissez-d&eacute;posez un composant <span class="emphasis"><strong>cFile</strong></span> et un <span class="emphasis"><strong>cMessagingEndpoint</strong></span> dans l'espace de mod&eacute;lisation
						graphique.</p></li><li class="step" title="&Eacute;tape 2"><p>Du dossier <span class="emphasis"><strong>Processor</strong></span>, glissez-d&eacute;posez un <span class="emphasis"><strong>cProcessor</strong></span> dans l'espace de mod&eacute;lisation
						graphique.</p></li><li class="step" title="&Eacute;tape 3"><p>Reliez les composants &agrave; l'aide de liens <span class="emphasis"><strong>Row</strong></span> &gt;
							<span class="emphasis"><strong>Route</strong></span> comme dans la capture
						d'&eacute;cran.</p></li><li class="step" title="&Eacute;tape 4"><p>Renommez les composants afin de mieux identifier leur r&ocirc;le dans la Route.</p></li></ol></div></div><div class="section" title="Configurer les composants et les connexions"><div class="titlepage"><div><div><h4 class="title"><a name="d0e8240"></a>Configurer les composants et les connexions</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Double-cliquez sur le composant <span class="emphasis"><strong>cFile</strong></span> pour ouvrir sa vue
							<span class="emphasis"><strong>Basic settings</strong></span>.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_3.png"></div></li><li class="step" title="&Eacute;tape 2"><p>Dans le champ <span class="emphasis"><strong>Path</strong></span>, sp&eacute;cifiez le chemin d'acc&egrave;s au
						fichier source <span class="emphasis"><em>people.xml</em></span>.</p></li><li class="step" title="&Eacute;tape 3"><p>Cliquez-droit sur la Route dans la vue <span class="emphasis"><strong>Repository</strong></span> et
						s&eacute;lectionnez <span class="emphasis"><strong>Manage Route Resources</strong></span> dans le
						menu contextuel.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_4.png"></div><p>L'assistant <span class="emphasis"><strong>Manage Route Resources</strong></span> s'ouvre.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_7.png"></div></li><li class="step" title="&Eacute;tape 4"><p>Dans l'assistant <span class="emphasis"><strong>Manage Route Resources</strong></span>, cliquez sur
							<span class="emphasis"><strong>Add</strong></span> et s&eacute;lectionnez <span class="emphasis"><em>SampleXquery</em></span> dans la vue des ressources.
						Cliquez sur <span class="emphasis"><strong>OK</strong></span>.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_6.png"></div><p>La ressource de Route <span class="emphasis"><em>SampleXquery</em></span> est ajout&eacute;e &agrave; la
						table, dans l'assistant <span class="emphasis"><strong>Manage Route
							Resources</strong></span>.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_5.png"></div></li><li class="step" title="&Eacute;tape 5"><p>S&eacute;lectionnez <span class="emphasis"><em>SampleXquery</em></span> dans la liste des ressources
						de Route puis cliquez sur <span class="emphasis"><strong>Copy Path</strong></span>.
						Cliquez sur <span class="emphasis"><strong>OK</strong></span> pour fermer
						l'assistant.</p></li><li class="step" title="&Eacute;tape 6"><p>Double-cliquez sur le composant <span class="emphasis"><strong>cMessagingEndpoint</strong></span> pour
						afficher sa vue <span class="emphasis"><strong>Basic settings</strong></span>.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_8.png"></div></li><li class="step" title="&Eacute;tape 7"><p>Dans le champ <span class="emphasis"><strong>URI</strong></span>, saisissez <span class="emphasis"><em>xquery:</em></span> et collez entre guillemets doubles le chemin de la
						ressource de Route <span class="emphasis"><em>SampleXquery</em></span> copi&eacute;
						pr&eacute;c&eacute;demment.</p></li><li class="step" title="&Eacute;tape 8"><p>Cliquez sur l'onglet <span class="emphasis"><strong>Advanced settings</strong></span>, ajoutez le
						composant Camel <span class="emphasis"><strong>saxon</strong></span> dans la liste
							<span class="emphasis"><strong>Dependencies</strong></span>. Pour plus d'informations
						concernant <span class="emphasis"><strong>Xquery</strong></span>, consultez le site Web
						d'Apache Camel (en anglais) : <a class="link" href="http://camel.apache.org/xquery-endpoint.html" target="_top">http://camel.apache.org/xquery-endpoint.html</a>.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_10.png"></div></li><li class="step" title="&Eacute;tape 9"><p>Double-cliquez sur le <span class="emphasis"><strong>cProcessor</strong></span> pour ouvrir sa vue
							<span class="emphasis"><strong>Basic settings</strong></span>.</p><div class="mediaobject"><img src="../images/use_case_cmessagingendpoint_scenario3_9.png"></div></li><li class="step" title="&Eacute;tape 10"><p>Dans la zone <span class="emphasis"><strong>Code</strong></span>, saisissez le code suivant pour
						afficher les messages intercept&eacute;s dans la console :</p><p>
						</p><pre class="programlisting">System.out.println(exchange.getIn().getBody(String.class));</pre><p>
					</p></li><li class="step" title="&Eacute;tape 11"><p>Appuyez sur les touches <span class="emphasis"><strong>Ctrl+S</strong></span> pour sauvegarder votre
						Route.</p></li></ol></div></div><div class="section" title="Visualiser le code et ex&eacute;cuter la Route"><div class="titlepage"><div><div><h4 class="title"><a name="d0e8400"></a>Visualiser le code et ex&eacute;cuter la Route</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>Pour visualiser le code g&eacute;n&eacute;r&eacute;, cliquez sur l'onglet <span class="emphasis"><strong>Code</strong></span> au bas de l'espace de mod&eacute;lisation graphique.</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="../images/use_case_cmessagingendpoint_scenario3_11.png" height="360"></td></tr></table></div><p>Comme affich&eacute; dans le code ci-dessus, le message est rout&eacute; depuis (<code class="code">from</code>) le
						composant <code class="code">Message_source_cFile_1</code> vers (<code class="code">.to</code>) le
							<code class="code">cMessagingEndpoint_1</code> et est trait&eacute; par le composant
							<code class="code">cProcessor_1</code>.</p></li><li class="step" title="&Eacute;tape 2"><p>Dans la vue <span class="emphasis"><strong>Run</strong></span>, cliquez sur le bouton <span class="emphasis"><strong>Run</strong></span> pour lancer l'ex&eacute;cution de votre Route. Vous
						pouvez &eacute;galement appuyer sur <span class="emphasis"><strong>F6</strong></span> pour
						l'ex&eacute;cuter. </p><p>R&eacute;sultat : Le pr&eacute;nom (<span class="emphasis"><em>firstName</em></span>) et le nom de famille
							(<span class="emphasis"><em>lastName</em></span>) de tous les &eacute;l&eacute;ments
							<span class="emphasis"><em>person</em></span> du fichier source sont affich&eacute;s dans la
						console.</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="../images/use_case_cmessagingendpoint_scenario3_12.png" height="360"></td></tr></table></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="cMail.html">Pr&eacute;c&eacute;dent</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-messaging.html">Niveau sup&eacute;rieur</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="cTimer.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">cMail&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-esb-mediationcomponents-rg-fr..html">Sommaire</a></td><td width="40%" align="right" valign="top">&nbsp;cTimer</td></tr></table></div></body></html>