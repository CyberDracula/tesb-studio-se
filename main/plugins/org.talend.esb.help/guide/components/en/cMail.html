<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>cMail</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Messaging components"><link rel="prev" href="cJMS.html" title="cJMS"><link rel="next" href="cMessagingEndpoint.html" title="cMessagingEndpoint"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="cMail"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cMail"></a>cMail</h2></div></div></div><div class="mediaobject"><img src="../images/cmail_icon32_white.png"></div><div class="section" title="cMail Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6172"></a>cMail Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
                            <p><span class="bold"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>Messaging </p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="bold"><strong>cMail</strong></span> is designed to send or
                                receive mails.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Sends or receives mails in a route.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Protocols</em></span></p>
                        </td><td valign="top">
                            <p>List of protocols for sending or receiving mails.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Host</em></span></p>
                        </td><td valign="top">
                            <p>Host name of the mail server.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Port</em></span></p>
                        </td><td valign="top">
                            <p>Port number of the mail server.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>UserName</em></span> and
                                <span class="emphasis"><em>Password</em></span></p>
                        </td><td valign="top">
                            <p>Login authentication data.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Subject</em></span></p>
                        </td><td valign="top">
                            <p>Subject of the mail being sent.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Content Type</em></span></p>
                        </td><td valign="top">
                            <p>The mail content type.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>From</em></span></p>
                        </td><td valign="top">
                            <p>The mail sender.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>To </em></span></p>
                        </td><td valign="top">
                            <p>The mail receivers.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>CC</em></span></p>
                        </td><td valign="top">
                            <p>The CC recipients of the mail. Separate multiple email addresses
                                with a comma.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>BCC</em></span></p>
                        </td><td valign="top">
                            <p>The BCC recipients of the mail. Separate multiple email addresses
                                with a comma.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Arguments</em></span></p>
                        </td><td valign="top">
                            <p>Click the <span class="bold"><strong>[+]</strong></span> button to add lines
                                as needed in the <span class="bold"><strong>Arguments</strong></span> table.
                                Then, enter the name and value of an argument.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>When used as a start component, <span class="bold"><strong>cMail</strong></span> is intended to receive mails. Otherwise, it is
                                intended to send mails.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Using cMail to send and receive mails"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6445"></a>Scenario: Using <span class="bold"><strong>cMail</strong></span> to send and receive
            mails</h3></div></div></div><p>This scenario includes two routes. The first one sends a mail while the second
            receives it.</p><p>Now we build a route to send a mail.</p><div class="procedure" title="Procedure&nbsp;3.10.&nbsp;Mail sending"><a name="d0e6455"></a><p class="title"><b>Procedure&nbsp;3.10.&nbsp;Mail sending  </b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the components from the <span class="bold"><strong>Palette</strong></span> onto the
                    workspace: <span class="bold"><strong>cFile</strong></span>, <span class="bold"><strong>cMail</strong></span> and <span class="bold"><strong>cProcessor</strong></span>,
                    respectively labelled as <span class="bold"><strong>Mail_to_send</strong></span>,
                        <span class="bold"><strong>Send_Mail</strong></span> and <span class="bold"><strong>Mail_Sent</strong></span>. </p></li><li class="step" title="Step 2"><p>Link the components using a <span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>Route</strong></span> connection.</p><div class="mediaobject"><img src="../images/use_case_cmail_1.png"></div></li><li class="step" title="Step 3"><p>Double-click <span class="bold"><strong>cFile</strong></span> to open its <span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject"><img src="../images/use_case_cmail_2.png"></div></li><li class="step" title="Step 4"><p>Click the <span class="bold"><strong>[...]</strong></span> button next to the <span class="bold"><strong>Path</strong></span> field to select the folder that has the file to
                    send. </p></li><li class="step" title="Step 5"><p>In the <span class="bold"><strong>FileName</strong></span> field, enter the name of the
                    file to send, <span class="italic">test mail.txt</span> in this use case.
                    Keep the default setup of other items.</p><p>The content of this file is <span class="italic">test mail
                    body</span>.</p></li><li class="step" title="Step 6"><p>Double-click <span class="bold"><strong>cMail</strong></span> to open its <span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject"><img src="../images/use_case_cmail_3.png"></div></li><li class="step" title="Step 7"><p>In the <span class="bold"><strong>Protocols</strong></span> list, select <span class="italic">smtps</span>.</p><p>In the <span class="bold"><strong>Host</strong></span> field, type in the host name of
                    the smtp server, <span class="italic">smtp.gmail.com</span> in this use
                    case.</p><p>In the <span class="bold"><strong>UserName</strong></span> and <span class="bold"><strong>Password</strong></span> fields, enter the login authentication credentials,
                    which are in the form of context variables in this example. For more information
                    about context variable setup, see <span class="bluebold">Talend Open Studio for ESB</span>
                    <span class="bold"><strong>User Guide</strong></span>.</p><p>Keep the default setting of the <span class="bold"><strong>ContentType</strong></span>
                    field, i.e. <span class="italic">text/plain</span>.</p><p>In the <span class="bold"><strong>To</strong></span> field, enter the receiver of the
                    mail, which is also in the form of context variable in this example.</p></li><li class="step" title="Step 8"><p>Double-click <span class="bold"><strong>cProcessor</strong></span> to open its <span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject" align="center"><img src="../images/use_case_cmail_4.png" align="middle"></div></li><li class="step" title="Step 9"><p>In the <span class="bold"><strong>Code</strong></span> box, enter the code below to give
                    a prompt after the mail is sent.</p><p>
                    </p><pre class="programlisting">System.out.println("Mail sent");</pre><p>
                </p></li><li class="step" title="Step 10"><p>Save the route and press <span class="bold"><strong>F6</strong></span> to run.</p><div class="mediaobject" align="center"><img src="../images/use_case_cmail_5.png" align="middle"></div></li></ol></div><p>As shown above, the mail has been sent out successfully.</p><p>Now we build a route to receive the mail.</p><div class="procedure" title="Procedure&nbsp;3.11.&nbsp;Mail receiving"><a name="d0e6631"></a><p class="title"><b>Procedure&nbsp;3.11.&nbsp;Mail receiving </b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the components from the <span class="bold"><strong>Palette</strong></span> onto the
                    workspace: <span class="bold"><strong>cMail</strong></span> and <span class="bold"><strong>cProcessor</strong></span>, respectively labelled as <span class="bold"><strong>Receive_Mail</strong></span> and <span class="bold"><strong>Mail_Body</strong></span>.
                </p></li><li class="step" title="Step 2"><p>Link the components using a <span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>Route</strong></span> connection.</p><div class="mediaobject"><img src="../images/use_case_cmail_6.png"></div></li><li class="step" title="Step 3"><p>Double-click <span class="bold"><strong>cMail</strong></span> to open its <span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject"><img src="../images/use_case_cmail_7.png"></div></li><li class="step" title="Step 4"><p>In the <span class="bold"><strong>Protocols</strong></span> list, select <span class="italic">imaps</span>.</p></li><li class="step" title="Step 5"><p>In the <span class="bold"><strong>Host</strong></span> field, type in the host name of
                    the imap server, <span class="italic">imap.gmail.com</span> in this use
                    case.</p></li><li class="step" title="Step 6"><p>In the <span class="bold"><strong>Port</strong></span> field, type in the port number,
                        <span class="italic">993</span> in this use case.</p></li><li class="step" title="Step 7"><p>In the <span class="bold"><strong>UserName</strong></span> and <span class="bold"><strong>Password</strong></span> fields, enter the login authentication credentials,
                    which are in the form of context variables in this example. For more information
                    about context variable setup, see <span class="bluebold">Talend Open Studio for ESB</span>
                    <span class="bold"><strong>User Guide</strong></span>.</p></li><li class="step" title="Step 8"><p>Keep the default setting of the <span class="bold"><strong>ContentType</strong></span>
                    field, i.e. <span class="italic">text/plain</span>.</p></li><li class="step" title="Step 9"><p>Double-click <span class="bold"><strong>cProcessor</strong></span> to open its <span class="bold"><strong>Basic settings</strong></span> view in the <span class="bold"><strong>Component</strong></span> tab. </p><div class="mediaobject"><img src="../images/use_case_cmail_8.png"></div></li><li class="step" title="Step 10"><p>In the <span class="bold"><strong>Code</strong></span> box, enter the code below to
                    print the mail body.</p><p>
                    </p><pre class="programlisting">System.out.println(exchange.getIn().getBody(String.class));</pre><p>
                </p></li><li class="step" title="Step 11"><p>Save the route and press <span class="bold"><strong>F6</strong></span> to run.</p><div class="mediaobject"><img src="../images/use_case_cmail_9.png"></div><p>As shown above, the mail has been received and its content is <span class="italic">test mail body</span>.</p></li></ol></div></div></div></body></html>