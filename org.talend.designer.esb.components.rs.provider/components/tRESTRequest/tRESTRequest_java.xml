<?xml version="1.0" encoding="UTF-8"?>
<COMPONENT>
	<HEADER AUTHOR="ITOS" RELEASE_DATE="20110805A"
			VERSION="0.101" STATUS="ALPHA"
			COMPATIBILITY="ALL" PLATEFORM="ALL"
			SERIAL="" STARTABLE="true"
			SCHEMA_AUTO_PROPAGATE="true"
			DATA_AUTO_PROPAGATE="false"
			HAS_CONDITIONAL_OUTPUTS="true">
		<SIGNATURE />
	</HEADER>
	<FAMILIES>
		<FAMILY>ESB/REST</FAMILY>
	</FAMILIES>

	<DOCUMENTATION>
		<URL />
	</DOCUMENTATION>

	<CONNECTORS>
		<CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MIN_OUTPUT="1" MULTI_SCHEMA="true" BUILTIN="true" />
		<CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MAX_OUTPUT="1" NAME="WRONG_CALLS" COLOR="000000" />
		<CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="0" MAX_INPUT="0" />
		<CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" MAX_OUTPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" MAX_OUTPUT="1" />
		<CONNECTOR CTYPE="COMPONENT_OK" COLOR="0000FF"/>
		<CONNECTOR CTYPE="COMPONENT_ERROR" COLOR="FF0000"/>
		<CONNECTOR CTYPE="RUN_IF" />
	</CONNECTORS>

	<PARAMETERS>
		<PARAMETER NAME="SCHEMA_WRONG_CALLS" FIELD="SCHEMA_TYPE" NUM_ROW="1" CONTEXT="WRONG_CALLS" SHOW="false">
			<TABLE READONLY="true">
				<COLUMN NAME="uri" TYPE="id_String" LENGTH="255" READONLY="true"/>
				<COLUMN NAME="method" TYPE="id_String" LENGTH="255" READONLY="true"/>
				<COLUMN NAME="status" TYPE="id_Integer" READONLY="true"/>
				<COLUMN NAME="error" TYPE="id_String" LENGTH="1024" READONLY="true"/>
			</TABLE>
		</PARAMETER>

		<!-- rest service endpoint -->
		<PARAMETER FIELD="TEXT" NAME="REST_ENDPOINT" NUM_ROW="5" REQUIRED="true" SHOW="true">
			<DEFAULT>"http://localhost:8088/"</DEFAULT>
		</PARAMETER>

		<PARAMETER NAME="SCHEMAS" FIELD="TABLE" NUM_ROW="10" REQUIRED="true" NB_LINES="5">
			<ITEMS>
				<ITEM NAME="SCHEMA" FIELD="SCHEMA_TYPE" />
				<ITEM NAME="HTTP_VERB" FIELD="CLOSED_LIST">
					<ITEMS DEFAULT="GET">
						<ITEM NAME="GET" VALUE="GET" />
						<ITEM NAME="POST" VALUE="POST" />
						<ITEM NAME="PUT" VALUE="PUT" />
						<ITEM NAME="DELETE" VALUE="DELETE" />
					</ITEMS>
				</ITEM>
				<ITEM NAME="URI_PATTERN" FIELD="TEXT" VALUE='"/"'/>
			</ITEMS>
		</PARAMETER>

		<PARAMETER NAME="HTTP_BASIC_AUTH" FIELD="CHECK" NUM_ROW="100"
				DYNAMIC_SETTINGS="true" SHOW="true" >
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER NAME="SERVICE_ACTIVITY_MONITOR" FIELD="CHECK" NUM_ROW="105"
				DYNAMIC_SETTINGS="true" SHOW="true" >
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER NAME="SERVICE_LOCATOR" FIELD="CHECK" NUM_ROW="110"
				DYNAMIC_SETTINGS="true" SHOW="true" >
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="SERVICE_NAMESPACE" FIELD="TEXT" REQUIRED="true" NUM_ROW="110"
				READONLY="true" SHOW_IF="SERVICE_LOCATOR == 'true'">
			<DEFAULT>http://__NAME__.__PROJECT_TECHNICAL_NAME__/__VERSION__/</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="SERVICE_NAME" FIELD="TEXT" REQUIRED="true" NUM_ROW="110" READONLY="true"
				SHOW_IF="SERVICE_LOCATOR == 'true'">
			<DEFAULT>__NAME__</DEFAULT>
		</PARAMETER>
	</PARAMETERS>

	<ADVANCED_PARAMETERS>
		<PARAMETER NAME="LOG_MESSAGES" FIELD="CHECK" REQUIRED="true" NUM_ROW="7">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="SL_META_DATA" FIELD="TABLE" NUM_ROW="20"
			NB_LINES="5" SHOW_IF="SERVICE_LOCATOR == 'true'" GROUP="CUSTOM_PROPERTIES_GROUP">
			<ITEMS>
				<ITEM NAME="NAME" FIELD="TEXT" VALUE="name"/>
				<ITEM NAME="VALUE" VALUE="value"/>
			</ITEMS>
		</PARAMETER>
	</ADVANCED_PARAMETERS>

	<CODEGENERATION>
		<TEMPLATES INPUT="Loop" OUTPUT="In">
			<TEMPLATE NAME="Loop" COMPONENT="tRESTRequestLoop">
				<LINK_TO NAME="In" CTYPE="ITERATE" />
			</TEMPLATE>

			<TEMPLATE NAME="In" COMPONENT="tRESTRequestIn" />

			<TEMPLATE_PARAM SOURCE="self.REST_ENDPOINT" TARGET="Loop.REST_ENDPOINT" />
			<TEMPLATE_PARAM SOURCE="self.SCHEMAS" TARGET="Loop.SCHEMAS" />
			<TEMPLATE_PARAM SOURCE="self.SERVICE_LOCATOR" TARGET="Loop.SERVICE_LOCATOR" />

			<TEMPLATE_PARAM SOURCE="self.SCHEMAS" TARGET="In.SCHEMAS" />
			<TEMPLATE_PARAM SOURCE="self.SCHEMA_WRONG_CALLS" TARGET="In.SCHEMA_WRONG_CALLS" />
		</TEMPLATES>
	</CODEGENERATION>

	<RETURNS>
		<RETURN AVAILABILITY="AFTER" NAME="NB_LINE" TYPE="id_Integer"/>
		<RETURN AVAILABILITY="FLOW" NAME="URI" TYPE="id_String" />
		<RETURN AVAILABILITY="FLOW" NAME="URI_BASE" TYPE="id_String" />
		<RETURN AVAILABILITY="FLOW" NAME="URI_ABSOLUTE" TYPE="id_String" />
		<RETURN AVAILABILITY="FLOW" NAME="HTTP_METHOD" TYPE="id_String" />
	</RETURNS>

</COMPONENT>
